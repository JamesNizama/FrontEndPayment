  <!-- Projects Page -->
<div class="page-content" id="projects-page">
    <div class="content-header">
      <h1 class="page-title">Proyectos</h1>
      <div>
        <button class="btn btn-outline-secondary me-2">
          <i class='bx bx-list-ul'></i>
        </button>
        <button class="btn btn-outline-secondary me-2">
          <i class='bx bx-grid-alt'></i>
        </button>
        <button class="btn btn-turquoise" data-bs-toggle="modal" data-bs-target="#createModal">
          <i class='bx bx-plus'></i> Nueva Proyecto
        </button>
        
      </div>
</div>

<div class="row">
     <!-- Iterar sobre la lista de proyectos -->
      <div class="col-md-4" *ngFor="let p of proyecto">
        <div class="card project-card">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <!-- Título del proyecto -->
              <h5 class="card-title">{{ p.titulo }}</h5>
              <!-- Estado del proyecto -->
              <span class="badge" [ngClass]="{
                'bg-success': p.estado === 'Activo',
                'bg-warning': p.estado === 'En Progreso',
                'bg-danger': p.estado === 'No Iniciado'
              }">
                {{ p.estado }}
              </span>
            </div>
            <!-- Descripción del proyecto -->
            <p class="card-text text-muted">{{ p.descripcion }}</p>

            <div class="mb-3">
              <div class="d-flex justify-content-between mb-1">
                <span>Progreso</span>
                <span>{{ p.progreso }}%</span>
              </div>
              <div class="progress">
                <div class="progress-bar" role="progressbar" [style.width]="p.progreso + '%'" [attr.aria-valuenow]="p.progreso" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>

            <div class="d-flex justify-content-between align-items-center">
              <div>
                <small class="text-muted">Fecha límite: {{ p.fecha_limite | date: 'dd/MM/yyyy' }}</small>
              </div>
              <button class="btn btn-sm btn-outline-primary">Detalles</button>
            </div>
          </div>
        </div>
      </div>
</div>


                  <!-- Task Modal registrar -->
                  <div class="modal fade" id="createModal" tabindex="-1" aria-labelledby="taskModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="taskModalLabel">Nueva actividad</h5>
                          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          
                          <form  #formActividad="ngForm">
                            
                            <div class="mb-3">
                              <label for="projectTitle" class="form-label">Título del proyecto</label>
                              <input type="text" class="form-control" id="projectTitle" placeholder="Ej: Rediseño del sitio web" required>
                            </div>
                            <div class="mb-3">
                              <label for="projectDescription" class="form-label">Descripción</label>
                              <textarea class="form-control" id="projectDescription" rows="3" placeholder="Breve descripción del proyecto" required></textarea>
                            </div>
                            <div class="row">
                              <div class="col-md-6 mb-3">
                                <label for="projectDeadline" class="form-label">Fecha límite</label>
                                <input type="date" class="form-control" id="projectDeadline" required>
                              </div>
                              <div class="col-md-6 mb-3">
                                <label for="projectStatus" class="form-label">Estado</label>
                                <select class="form-select" id="projectStatus" required>
                                  <option value="active">Activo</option>
                                  <option value="paused">Pausado</option>
                                  <option value="completed">Completado</option>
                                </select>
                              </div>
                            </div>
                            <div class="row mb-3">
                              <div class="col-md-6">
                                <label for="projectEmployee" class="form-label">Empleado asignado</label>
                                <select class="form-select" id="idUsuario" name="idUsuario" [(ngModel)]="newActividad.id_usuario">
                                  <option [ngValue]="null">Seleccionar</option>
                                  <option *ngFor="let data of dataUsuario" [ngValue]="data.id_usuario">{{ data.nombre }}</option>
                                </select>
                              </div>
                            </div>
                            
                            <hr>

                            <div class="mb-3">
                              <label class="form-label d-flex justify-content-between">
                                <span>Ítems del proyecto (mínimo 3)</span>
                                <span>{{ newItems.length }} ítems</span>
                              </label>
                            
                              <div *ngFor="let item of newItems; let i = index" class="mb-2">
                                <input type="text" class="form-control" [(ngModel)]="newItems[i]" placeholder="Descripción del ítem" required>
                              </div>
                            
                              <div class="text-muted small mb-2 mt-3">
                                El porcentaje de progreso se calcula automáticamente en base a los ítems completados.
                              </div>
                            
                              <button type="button" class="btn btn-sm btn-outline-secondary" (click)="addItem()">
                                <i class="bx bx-plus"></i> Agregar ítem
                              </button>
                            </div>
                            
                             <!-- Botón -->
                             <div class="modal-footer">
                              <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancelar</button>
                              <button type="submit" class="btn btn-turquoise" >Agregar</button>
                            </div>

                          </form>
                        
                        </div>
                   
                      </div>
                    </div>
                  </div>      